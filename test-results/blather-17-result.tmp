(TEST 17) Three Clients + Rejoining
COMMENTS:
Three clients join and there are several departures and rejoins. 


program: TESTY_MULTI

-----------------------------------------------------------------------------------------------
* Summary Program Information

| KEY      | COMMAND                      | RET | STATE      | OUTPUT-FILE                       | VALGRIND                     | 
| server   | ./bl_server metropolis       |  13 | ValgErr    | blather-17-server_output_file.tmp | blather-17-server_valgrd.tmp | 
| clark1   | ./bl_client metropolis Clark | 137 | TimeoutErr | blather-17-clark1_output_file.tmp | blather-17-clark1_valgrd.tmp | 
| bruce1   | ./bl_client metropolis Bruce | 137 | TimeoutErr | blather-17-bruce1_output_file.tmp | blather-17-bruce1_valgrd.tmp | 
| lois1    | ./bl_client metropolis Lois  | 137 | TimeoutErr | blather-17-lois1_output_file.tmp  | blather-17-lois1_valgrd.tmp  | 
| clark2   | ./bl_client metropolis Clark | 137 | TimeoutErr | blather-17-clark2_output_file.tmp | blather-17-clark2_valgrd.tmp | 
| clark3   | ./bl_client metropolis Clark | 137 | TimeoutErr | blather-17-clark3_output_file.tmp | blather-17-clark3_valgrd.tmp | 
| bruce2   | ./bl_client metropolis Bruce | 137 | TimeoutErr | blather-17-bruce2_output_file.tmp | blather-17-bruce2_valgrd.tmp | 

8 FAILURES FOUND

-----------------------------------------------------------------------------------------------
* FAILURE 1
Valgrind found errors for program server (./bl_server metropolis : return code 13[VALG_ERROR])\nValgrind output from 'test-results/raw/blather-17-server_valgrd.tmp'\n==1537757== Memcheck, a memory error detector
==1537757== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==1537757== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==1537757== Command: ./bl_server metropolis
==1537757== Parent PID: 1537755
==1537757== 
==1537757== Conditional jump or move depends on uninitialised value(s)
==1537757==    at 0x10992B: server_start (server_funcs.c:21)
==1537757==    by 0x10972D: main (bl_server.c:49)
==1537757==  Uninitialised value was created by a stack allocation
==1537757==    at 0x1095F9: main (bl_server.c:21)
==1537757== 
==1537757== Conditional jump or move depends on uninitialised value(s)
==1537757==    at 0x109A20: server_start (server_funcs.c:33)
==1537757==    by 0x10972D: main (bl_server.c:49)
==1537757==  Uninitialised value was created by a stack allocation
==1537757==    at 0x109898: server_start (server_funcs.c:17)
==1537757== 
==1537757== Syscall param openat(filename) points to uninitialised byte(s)
==1537757==    at 0x4E20A5B: open (open64.c:48)
==1537757==    by 0x109AB4: server_start (server_funcs.c:40)
==1537757==    by 0x10972D: main (bl_server.c:49)
==1537757==  Address 0x1ffef3ebf3 is on thread 1's stack
==1537757==  in frame #1, created by server_start (server_funcs.c:17)
==1537757==  Uninitialised value was created by a stack allocation
==1537757==    at 0x109898: server_start (server_funcs.c:17)
==1537757== 
==1537757== Conditional jump or move depends on uninitialised value(s)
==1537757==    at 0x483EF58: strlen (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==1537757==    by 0x4EAAE94: __vfprintf_internal (vfprintf-internal.c:1688)
==1537757==    by 0x4EBE119: __vsnprintf_internal (vsnprintf.c:114)
==1537757==    by 0x10B465: check_fail (util.c:49)
==1537757==    by 0x109AF6: server_start (server_funcs.c:41)
==1537757==    by 0x10972D: main (bl_server.c:49)
==1537757==  Uninitialised value was created by a stack allocation
==1537757==    at 0x109898: server_start (server_funcs.c:17)
==1537757== 
==1537757== Conditional jump or move depends on uninitialised value(s)
==1537757==    at 0x483EF58: strlen (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==1537757==    by 0x4EAAE94: __vfprintf_internal (vfprintf-internal.c:1688)
==1537757==    by 0x4EAC021: buffered_vfprintf (vfprintf-internal.c:2377)
==1537757==    by 0x4EA8EA3: __vfprintf_internal (vfprintf-internal.c:1346)
==1537757==    by 0x4EB38D7: locked_vfxprintf (fxprintf.c:31)
==1537757==    by 0x4EB3B77: __vfxprintf (fxprintf.c:72)
==1537757==    by 0x4EB3B77: __fxprintf (fxprintf.c:82)
==1537757==    by 0x4E9454E: perror_internal (perror.c:39)
==1537757==    by 0x10B474: check_fail (util.c:51)
==1537757==    by 0x109AF6: server_start (server_funcs.c:41)
==1537757==    by 0x10972D: main (bl_server.c:49)
==1537757==  Uninitialised value was created by a stack allocation
==1537757==    at 0x109898: server_start (server_funcs.c:17)
==1537757== 
==1537757== Syscall param write(buf) points to uninitialised byte(s)
==1537757==    at 0x4F401E7: write (write.c:26)
==1537757==    by 0x4EC100C: _IO_file_write@@GLIBC_2.2.5 (fileops.c:1181)
==1537757==    by 0x4EC1927: new_do_write (fileops.c:449)
==1537757==    by 0x4EC1927: _IO_new_file_xsputn (fileops.c:1255)
==1537757==    by 0x4EC1927: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1197)
==1537757==    by 0x4EAC0D2: buffered_vfprintf (vfprintf-internal.c:2395)
==1537757==    by 0x4EA8EA3: __vfprintf_internal (vfprintf-internal.c:1346)
==1537757==    by 0x4EB38D7: locked_vfxprintf (fxprintf.c:31)
==1537757==    by 0x4EB3B77: __vfxprintf (fxprintf.c:72)
==1537757==    by 0x4EB3B77: __fxprintf (fxprintf.c:82)
==1537757==    by 0x4E9454E: perror_internal (perror.c:39)
==1537757==    by 0x10B474: check_fail (util.c:51)
==1537757==    by 0x109AF6: server_start (server_funcs.c:41)
==1537757==    by 0x10972D: main (bl_server.c:49)
==1537757==  Address 0x1ffef2bb8b is on thread 1's stack
==1537757==  in frame #3, created by buffered_vfprintf (vfprintf-internal.c:2345)
==1537757==  Uninitialised value was created by a stack allocation
==1537757==    at 0x109898: server_start (server_funcs.c:17)
==1537757== 
==1537757== 
==1537757== HEAP SUMMARY:
==1537757==     in use at exit: 0 bytes in 0 blocks
==1537757==   total heap usage: 47 allocs, 47 frees, 1,991 bytes allocated
==1537757== 
==1537757== All heap blocks were freed -- no leaks are possible
==1537757== 
==1537757== For lists of detected and suppressed errors, rerun with: -s
==1537757== ERROR SUMMARY: 10 errors from 6 contexts (suppressed: 0 from 0)

-----------------------------------------------------------------------------------------------
* FAILURE 2
clark1 returned 137 (TIMEOUT): Program './bl_client metropolis Clark' still running after 20s seconds

-----------------------------------------------------------------------------------------------
* FAILURE 3
bruce1 returned 137 (TIMEOUT): Program './bl_client metropolis Bruce' still running after 20s seconds

-----------------------------------------------------------------------------------------------
* FAILURE 4
lois1 returned 137 (TIMEOUT): Program './bl_client metropolis Lois' still running after 20s seconds

-----------------------------------------------------------------------------------------------
* FAILURE 5
clark2 returned 137 (TIMEOUT): Program './bl_client metropolis Clark' still running after 20s seconds

-----------------------------------------------------------------------------------------------
* FAILURE 6
clark3 returned 137 (TIMEOUT): Program './bl_client metropolis Clark' still running after 20s seconds

-----------------------------------------------------------------------------------------------
* FAILURE 7
bruce2 returned 137 (TIMEOUT): Program './bl_client metropolis Bruce' still running after 20s seconds

-----------------------------------------------------------------------------------------------
* FAILURE 8
TEST OUTPUT MISMATCH: Side by Side Differences shown below 
- Expect output in: test-results/raw/blather-17-expect.tmp
- Acutal output in: test-results/raw/blather-17-actual.tmp
- Differing lines have a character like '|' and '<' in the middle

#+BEGIN_SRC diff
==== EXPECT ====                                                                      ==== ACTUAL ====                                                                   
>> START server ./bl_server metropolis                                                >> START server ./bl_server metropolis
>> START clark1 ./bl_client metropolis Clark                                          >> START clark1 ./bl_client metropolis Clark
>> INPUT clark1 Superman                                                              >> INPUT clark1 Superman 
>> START bruce1 ./bl_client metropolis Bruce                                          >> START bruce1 ./bl_client metropolis Bruce
>> INPUT bruce1 Batman                                                                >> INPUT bruce1 Batman
>> START lois1 ./bl_client metropolis Lois                                            >> START lois1 ./bl_client metropolis Lois
>> INPUT lois1 Investigative journalism!                                              >> INPUT lois1 Investigative journalism!
>> INPUT bruce1 Er...                                                                 >> INPUT bruce1 Er...
>> INPUT clark1 <EOF>                                                                 >> INPUT clark1 <EOF>
>> INPUT bruce1 See, you ruined the vibe                                              >> INPUT bruce1 See, you ruined the vibe
>> INPUT lois1 You two are so touchy                                                  >> INPUT lois1 You two are so touchy
>> START clark2 ./bl_client metropolis Clark                                          >> START clark2 ./bl_client metropolis Clark
>> INPUT clark2 Faster than a speeding bullet!                                        >> INPUT clark2 Faster than a speeding bullet!
>> INPUT bruce1 I am the night!                                                       >> INPUT bruce1 I am the night!
>> INPUT lois1 Confidential sources state...                                          >> INPUT lois1 Confidential sources state...
>> INPUT clark2 <EOF>                                                                 >> INPUT clark2 <EOF>
>> INPUT bruce1 <EOF>                                                                 >> INPUT bruce1 <EOF>
>> INPUT lois1 Hey, I'm trying!                                                       >> INPUT lois1 Hey, I'm trying!
>> START clark3 ./bl_client metropolis Clark                                          >> START clark3 ./bl_client metropolis Clark
>> START bruce2 ./bl_client metropolis Bruce                                          >> START bruce2 ./bl_client metropolis Bruce
>> INPUT lois1 Give me one more shot                                                  >> INPUT lois1 Give me one more shot
>> INPUT clark3 Okay                                                                  >> INPUT clark3 Okay
>> INPUT bruce2 I have my doubts                                                      >> INPUT bruce2 I have my doubts
>> INPUT clark3 More powerful than a locomotive                                       >> INPUT clark3 More powerful than a locomotive
>> INPUT bruce2 I am vengance!                                                        >> INPUT bruce2 I am vengance!
>> INPUT lois1 Fair and balanced!                                                     >> INPUT lois1 Fair and balanced!
>> INPUT bruce2 Strike 3.                                                             >> INPUT bruce2 Strike 3.
>> INPUT clark3 Seriously?                                                            >> INPUT clark3 Seriously?
>> INPUT lois1 You guys are jerks.                                                    >> INPUT lois1 You guys are jerks.
>> INPUT lois1 <EOF>                                                                  >> INPUT lois1 <EOF>
>> INPUT clark3 Think we were too hard on her?                                        >> INPUT clark3 Think we were too hard on her?
>> INPUT bruce2 I am Batman!                                                          >> INPUT bruce2 I am Batman!
>> INPUT clark3 Okay. We're done here.                                                >> INPUT clark3 Okay. We're done here.
>> SIGNAL server -15                                                                  >> SIGNAL server -15
                                                                                    > Program 'server' is not alive: ./testy: line 284: kill: (1537755) - No such process
                                                                                    > Non-zero return code 13
                                                                                    > Can't send SIGNAL to dead program 'server' (./bl_server metropolis)
>> WAIT_ALL                                                                           >> WAIT_ALL
<testy> WAIT for server                                                               <testy> WAIT for server
                                                                                    > Non-zero return code 13
<testy> WAIT for clark1                                                               <testy> WAIT for clark1
                                                                                    > Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
<testy> WAIT for bruce1                                                               <testy> WAIT for bruce1
                                                                                    > Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
<testy> WAIT for lois1                                                                <testy> WAIT for lois1
                                                                                    > Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
<testy> WAIT for clark2                                                               <testy> WAIT for clark2
                                                                                    > Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
<testy> WAIT for clark3                                                               <testy> WAIT for clark3
                                                                                    > Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
<testy> WAIT for bruce2                                                               <testy> WAIT for bruce2
                                                                                    > Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
>> CHECK_ALL cat                                                                      >> CHECK_ALL cat
<testy> CHECK_FAILURES for server                                                     <testy> CHECK_FAILURES for server
<testy> CHECK_FAILURES for clark1                                                     <testy> CHECK_FAILURES for clark1
<testy> CHECK_FAILURES for bruce1                                                     <testy> CHECK_FAILURES for bruce1
<testy> CHECK_FAILURES for lois1                                                      <testy> CHECK_FAILURES for lois1
<testy> CHECK_FAILURES for clark2                                                     <testy> CHECK_FAILURES for clark2
<testy> CHECK_FAILURES for clark3                                                     <testy> CHECK_FAILURES for clark3
<testy> CHECK_FAILURES for bruce2                                                     <testy> CHECK_FAILURES for bruce2
>> OUTPUT_ALL ./test_filter_client_output                                             >> OUTPUT_ALL ./test_filter_client_output

<testy> OUTPUT for server                                                             <testy> OUTPUT for server
LOG: BEGIN: server_start()                                                            LOG: BEGIN: server_start()
LOG: END: server_start()                                                            | Couldn't open file metropolÿ.log: Invalid argument
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 1 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 1                                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_join()                                                    <
LOG: join request for new client 'Clark'                                            <
LOG: BEGIN: server_add_client()                                                     <
LOG: END: server_add_client()                                                       <
LOG: END: server_handle_join()                                                      <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 2 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Clark' data_ready = 1                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Clark' MESSAGE 'Superman '                                           <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 2 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 1                                                                 <
LOG: client 0 'Clark' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_join()                                                    <
LOG: join request for new client 'Bruce'                                            <
LOG: BEGIN: server_add_client()                                                     <
LOG: END: server_add_client()                                                       <
LOG: END: server_handle_join()                                                      <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Clark' data_ready = 0                                                <
LOG: client 1 'Bruce' data_ready = 1                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 1 'Bruce' MESSAGE 'Batman'                                              <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 1                                                                 <
LOG: client 0 'Clark' data_ready = 0                                                <
LOG: client 1 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_join()                                                    <
LOG: join request for new client 'Lois'                                             <
LOG: BEGIN: server_add_client()                                                     <
LOG: END: server_add_client()                                                       <
LOG: END: server_handle_join()                                                      <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Clark' data_ready = 0                                                <
LOG: client 1 'Bruce' data_ready = 0                                                <
LOG: client 2 'Lois' data_ready = 1                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 2 'Lois' MESSAGE 'Investigative journalism!'                            <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Clark' data_ready = 0                                                <
LOG: client 1 'Bruce' data_ready = 1                                                <
LOG: client 2 'Lois' data_ready = 0                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 1 'Bruce' MESSAGE 'Er...'                                               <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Clark' data_ready = 1                                                <
LOG: client 1 'Bruce' data_ready = 0                                                <
LOG: client 2 'Lois' data_ready = 0                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Clark' DEPARTED                                                      <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Bruce' data_ready = 1                                                <
LOG: client 1 'Lois' data_ready = 0                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Bruce' MESSAGE 'See, you ruined the vibe'                            <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Bruce' data_ready = 0                                                <
LOG: client 1 'Lois' data_ready = 1                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 1 'Lois' MESSAGE 'You two are so touchy'                                <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 1                                                                 <
LOG: client 0 'Bruce' data_ready = 0                                                <
LOG: client 1 'Lois' data_ready = 0                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_join()                                                    <
LOG: join request for new client 'Clark'                                            <
LOG: BEGIN: server_add_client()                                                     <
LOG: END: server_add_client()                                                       <
LOG: END: server_handle_join()                                                      <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Bruce' data_ready = 0                                                <
LOG: client 1 'Lois' data_ready = 0                                                 <
LOG: client 2 'Clark' data_ready = 1                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 2 'Clark' MESSAGE 'Faster than a speeding bullet!'                      <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Bruce' data_ready = 1                                                <
LOG: client 1 'Lois' data_ready = 0                                                 <
LOG: client 2 'Clark' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Bruce' MESSAGE 'I am the night!'                                     <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Bruce' data_ready = 0                                                <
LOG: client 1 'Lois' data_ready = 1                                                 <
LOG: client 2 'Clark' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 1 'Lois' MESSAGE 'Confidential sources state...'                        <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Bruce' data_ready = 0                                                <
LOG: client 1 'Lois' data_ready = 0                                                 <
LOG: client 2 'Clark' data_ready = 1                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 2 'Clark' DEPARTED                                                      <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Bruce' data_ready = 1                                                <
LOG: client 1 'Lois' data_ready = 0                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Bruce' DEPARTED                                                      <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 2 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 1                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Lois' MESSAGE 'Hey, I'm trying!'                                     <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 2 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 1                                                                 <
LOG: client 0 'Lois' data_ready = 0                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_join()                                                    <
LOG: join request for new client 'Clark'                                            <
LOG: BEGIN: server_add_client()                                                     <
LOG: END: server_add_client()                                                       <
LOG: END: server_handle_join()                                                      <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 1                                                                 <
LOG: client 0 'Lois' data_ready = 0                                                 <
LOG: client 1 'Clark' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_join()                                                    <
LOG: join request for new client 'Bruce'                                            <
LOG: BEGIN: server_add_client()                                                     <
LOG: END: server_add_client()                                                       <
LOG: END: server_handle_join()                                                      <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 1                                                 <
LOG: client 1 'Clark' data_ready = 0                                                <
LOG: client 2 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Lois' MESSAGE 'Give me one more shot'                                <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 0                                                 <
LOG: client 1 'Clark' data_ready = 1                                                <
LOG: client 2 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 1 'Clark' MESSAGE 'Okay'                                                <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 0                                                 <
LOG: client 1 'Clark' data_ready = 0                                                <
LOG: client 2 'Bruce' data_ready = 1                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 2 'Bruce' MESSAGE 'I have my doubts'                                    <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 0                                                 <
LOG: client 1 'Clark' data_ready = 1                                                <
LOG: client 2 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 1 'Clark' MESSAGE 'More powerful than a locomotive'                     <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 0                                                 <
LOG: client 1 'Clark' data_ready = 0                                                <
LOG: client 2 'Bruce' data_ready = 1                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 2 'Bruce' MESSAGE 'I am vengance!'                                      <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 1                                                 <
LOG: client 1 'Clark' data_ready = 0                                                <
LOG: client 2 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Lois' MESSAGE 'Fair and balanced!'                                   <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 0                                                 <
LOG: client 1 'Clark' data_ready = 0                                                <
LOG: client 2 'Bruce' data_ready = 1                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 2 'Bruce' MESSAGE 'Strike 3.'                                           <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 0                                                 <
LOG: client 1 'Clark' data_ready = 1                                                <
LOG: client 2 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 1 'Clark' MESSAGE 'Seriously?'                                          <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 1                                                 <
LOG: client 1 'Clark' data_ready = 0                                                <
LOG: client 2 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Lois' MESSAGE 'You guys are jerks.'                                  <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 4 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Lois' data_ready = 1                                                 <
LOG: client 1 'Clark' data_ready = 0                                                <
LOG: client 2 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Lois' DEPARTED                                                       <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Clark' data_ready = 1                                                <
LOG: client 1 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Clark' MESSAGE 'Think we were too hard on her?'                      <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Clark' data_ready = 0                                                <
LOG: client 1 'Bruce' data_ready = 1                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 1 'Bruce' MESSAGE 'I am Batman!'                                        <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value 1                                           <
LOG: join_ready = 0                                                                 <
LOG: client 0 'Clark' data_ready = 1                                                <
LOG: client 1 'Bruce' data_ready = 0                                                <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_handle_client()                                                  <
LOG: client 0 'Clark' MESSAGE 'Okay. We're done here.'                              <
LOG: END: server_handle_client()                                                    <
LOG: BEGIN: server_check_sources()                                                  <
LOG: poll()'ing to check 3 input sources                                            <
LOG: poll() completed with return value -1                                          <
LOG: poll() interrupted by a signal                                                 <
LOG: END: server_check_sources()                                                    <
LOG: BEGIN: server_shutdown()                                                       <
LOG: END: server_shutdown()                                                         <

<testy> OUTPUT for clark1                                                             <testy> OUTPUT for clark1
-- Clark JOINED --                                                                  <
[Clark] : Superman                                                                  <
-- Bruce JOINED --                                                                  <
[Bruce] : Batman                                                                    <
-- Lois JOINED --                                                                   <
[Lois] : Investigative journalism!                                                  <
[Bruce] : Er...                                                                     <
End of Input, Departing                                                             <
Clark>>                                                                             <

<testy> OUTPUT for bruce1                                                             <testy> OUTPUT for bruce1
-- Bruce JOINED --                                                                  <
[Bruce] : Batman                                                                    <
-- Lois JOINED --                                                                   <
[Lois] : Investigative journalism!                                                  <
[Bruce] : Er...                                                                     <
-- Clark DEPARTED --                                                                <
[Bruce] : See, you ruined the vibe                                                  <
[Lois] : You two are so touchy                                                      <
-- Clark JOINED --                                                                  <
[Clark] : Faster than a speeding bullet!                                            <
[Bruce] : I am the night!                                                           <
[Lois] : Confidential sources state...                                              <
-- Clark DEPARTED --                                                                <
End of Input, Departing                                                             <
Bruce>>                                                                             <

<testy> OUTPUT for lois1                                                              <testy> OUTPUT for lois1
-- Lois JOINED --                                                                   <
[Lois] : Investigative journalism!                                                  <
[Bruce] : Er...                                                                     <
-- Clark DEPARTED --                                                                <
[Bruce] : See, you ruined the vibe                                                  <
[Lois] : You two are so touchy                                                      <
-- Clark JOINED --                                                                  <
[Clark] : Faster than a speeding bullet!                                            <
[Bruce] : I am the night!                                                           <
[Lois] : Confidential sources state...                                              <
-- Clark DEPARTED --                                                                <
-- Bruce DEPARTED --                                                                <
[Lois] : Hey, I'm trying!                                                           <
-- Clark JOINED --                                                                  <
-- Bruce JOINED --                                                                  <
[Lois] : Give me one more shot                                                      <
[Clark] : Okay                                                                      <
[Bruce] : I have my doubts                                                          <
[Clark] : More powerful than a locomotive                                           <
[Bruce] : I am vengance!                                                            <
[Lois] : Fair and balanced!                                                         <
[Bruce] : Strike 3.                                                                 <
[Clark] : Seriously?                                                                <
[Lois] : You guys are jerks.                                                        <
End of Input, Departing                                                             <
Lois>>                                                                              <

<testy> OUTPUT for clark2                                                             <testy> OUTPUT for clark2
-- Clark JOINED --                                                                  <
[Clark] : Faster than a speeding bullet!                                            <
[Bruce] : I am the night!                                                           <
[Lois] : Confidential sources state...                                              <
End of Input, Departing                                                             <
Clark>>                                                                             <

<testy> OUTPUT for clark3                                                             <testy> OUTPUT for clark3
-- Clark JOINED --                                                                  <
-- Bruce JOINED --                                                                  <
[Lois] : Give me one more shot                                                      <
[Clark] : Okay                                                                      <
[Bruce] : I have my doubts                                                          <
[Clark] : More powerful than a locomotive                                           <
[Bruce] : I am vengance!                                                            <
[Lois] : Fair and balanced!                                                         <
[Bruce] : Strike 3.                                                                 <
[Clark] : Seriously?                                                                <
[Lois] : You guys are jerks.                                                        <
-- Lois DEPARTED --                                                                 <
[Clark] : Think we were too hard on her?                                            <
[Bruce] : I am Batman!                                                              <
[Clark] : Okay. We're done here.                                                    <
!!! server is shutting down !!!                                                     <
Clark>>                                                                             <

<testy> OUTPUT for bruce2                                                             <testy> OUTPUT for bruce2
-- Bruce JOINED --                                                                  |
[Lois] : Give me one more shot                                                      |
[Clark] : Okay                                                                      |
[Bruce] : I have my doubts                                                          |
[Clark] : More powerful than a locomotive                                           |
[Bruce] : I am vengance!                                                            |
[Lois] : Fair and balanced!                                                         |
[Bruce] : Strike 3.                                                                 <
[Clark] : Seriously?                                                                <
[Lois] : You guys are jerks.                                                        <
-- Lois DEPARTED --                                                                 <
[Clark] : Think we were too hard on her?                                            <
[Bruce] : I am Batman!                                                              <
[Clark] : Okay. We're done here.                                                    <
!!! server is shutting down !!!                                                     <
Bruce>>                                                                             <

#+END_SRC

--- Line Differences ---
ACTUAL:  35) Program 'server' is not alive: ./testy: line 284: kill: (1537755) - No such process
ACTUAL:  36) Non-zero return code 13
ACTUAL:  37) Can't send SIGNAL to dead program 'server' (./bl_server metropolis)
ACTUAL:  40) Non-zero return code 13
ACTUAL:  42) Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
ACTUAL:  44) Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
ACTUAL:  46) Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
ACTUAL:  48) Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
ACTUAL:  50) Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
ACTUAL:  52) Return Code 137: TIMEOUT, program killed, not complete within 20s sec limit
EXPECT:  55) LOG: END: server_start()
EXPECT:  56) LOG: BEGIN: server_check_sources()
EXPECT:  57) LOG: poll()'ing to check 1 input sources
EXPECT:  58) LOG: poll() completed with return value 1
EXPECT:  59) LOG: join_ready = 1
EXPECT:  60) LOG: END: server_check_sources()
EXPECT:  61) LOG: BEGIN: server_handle_join()
EXPECT:  62) LOG: join request for new client 'Clark'
EXPECT:  63) LOG: BEGIN: server_add_client()
EXPECT:  64) LOG: END: server_add_client()
EXPECT:  65) LOG: END: server_handle_join()
EXPECT:  66) LOG: BEGIN: server_check_sources()
EXPECT:  67) LOG: poll()'ing to check 2 input sources
EXPECT:  68) LOG: poll() completed with return value 1
EXPECT:  69) LOG: join_ready = 0
EXPECT:  70) LOG: client 0 'Clark' data_ready = 1
EXPECT:  71) LOG: END: server_check_sources()
EXPECT:  72) LOG: BEGIN: server_handle_client()
EXPECT:  73) LOG: client 0 'Clark' MESSAGE 'Superman '
EXPECT:  74) LOG: END: server_handle_client()
EXPECT:  75) LOG: BEGIN: server_check_sources()
EXPECT:  76) LOG: poll()'ing to check 2 input sources
EXPECT:  77) LOG: poll() completed with return value 1
EXPECT:  78) LOG: join_ready = 1
EXPECT:  79) LOG: client 0 'Clark' data_ready = 0
EXPECT:  80) LOG: END: server_check_sources()
EXPECT:  81) LOG: BEGIN: server_handle_join()
EXPECT:  82) LOG: join request for new client 'Bruce'
EXPECT:  83) LOG: BEGIN: server_add_client()
EXPECT:  84) LOG: END: server_add_client()
EXPECT:  85) LOG: END: server_handle_join()
EXPECT:  86) LOG: BEGIN: server_check_sources()
EXPECT:  87) LOG: poll()'ing to check 3 input sources
EXPECT:  88) LOG: poll() completed with return value 1
EXPECT:  89) LOG: join_ready = 0
EXPECT:  90) LOG: client 0 'Clark' data_ready = 0
EXPECT:  91) LOG: client 1 'Bruce' data_ready = 1
EXPECT:  92) LOG: END: server_check_sources()
EXPECT:  93) LOG: BEGIN: server_handle_client()
EXPECT:  94) LOG: client 1 'Bruce' MESSAGE 'Batman'
EXPECT:  95) LOG: END: server_handle_client()
EXPECT:  96) LOG: BEGIN: server_check_sources()
EXPECT:  97) LOG: poll()'ing to check 3 input sources
EXPECT:  98) LOG: poll() completed with return value 1
EXPECT:  99) LOG: join_ready = 1
EXPECT: 100) LOG: client 0 'Clark' data_ready = 0
EXPECT: 101) LOG: client 1 'Bruce' data_ready = 0
EXPECT: 102) LOG: END: server_check_sources()
EXPECT: 103) LOG: BEGIN: server_handle_join()
EXPECT: 104) LOG: join request for new client 'Lois'
EXPECT: 105) LOG: BEGIN: server_add_client()
EXPECT: 106) LOG: END: server_add_client()
EXPECT: 107) LOG: END: server_handle_join()
EXPECT: 108) LOG: BEGIN: server_check_sources()
EXPECT: 109) LOG: poll()'ing to check 4 input sources
EXPECT: 110) LOG: poll() completed with return value 1
EXPECT: 111) LOG: join_ready = 0
EXPECT: 112) LOG: client 0 'Clark' data_ready = 0
EXPECT: 113) LOG: client 1 'Bruce' data_ready = 0
EXPECT: 114) LOG: client 2 'Lois' data_ready = 1
EXPECT: 115) LOG: END: server_check_sources()
EXPECT: 116) LOG: BEGIN: server_handle_client()
EXPECT: 117) LOG: client 2 'Lois' MESSAGE 'Investigative journalism!'
EXPECT: 118) LOG: END: server_handle_client()
EXPECT: 119) LOG: BEGIN: server_check_sources()
EXPECT: 120) LOG: poll()'ing to check 4 input sources
EXPECT: 121) LOG: poll() completed with return value 1
EXPECT: 122) LOG: join_ready = 0
EXPECT: 123) LOG: client 0 'Clark' data_ready = 0
EXPECT: 124) LOG: client 1 'Bruce' data_ready = 1
EXPECT: 125) LOG: client 2 'Lois' data_ready = 0
EXPECT: 126) LOG: END: server_check_sources()
EXPECT: 127) LOG: BEGIN: server_handle_client()
EXPECT: 128) LOG: client 1 'Bruce' MESSAGE 'Er...'
EXPECT: 129) LOG: END: server_handle_client()
EXPECT: 130) LOG: BEGIN: server_check_sources()
EXPECT: 131) LOG: poll()'ing to check 4 input sources
EXPECT: 132) LOG: poll() completed with return value 1
EXPECT: 133) LOG: join_ready = 0
EXPECT: 134) LOG: client 0 'Clark' data_ready = 1
EXPECT: 135) LOG: client 1 'Bruce' data_ready = 0
EXPECT: 136) LOG: client 2 'Lois' data_ready = 0
EXPECT: 137) LOG: END: server_check_sources()
EXPECT: 138) LOG: BEGIN: server_handle_client()
EXPECT: 139) LOG: client 0 'Clark' DEPARTED
EXPECT: 140) LOG: END: server_handle_client()
EXPECT: 141) LOG: BEGIN: server_check_sources()
EXPECT: 142) LOG: poll()'ing to check 3 input sources
EXPECT: 143) LOG: poll() completed with return value 1
EXPECT: 144) LOG: join_ready = 0
EXPECT: 145) LOG: client 0 'Bruce' data_ready = 1
EXPECT: 146) LOG: client 1 'Lois' data_ready = 0
EXPECT: 147) LOG: END: server_check_sources()
EXPECT: 148) LOG: BEGIN: server_handle_client()
EXPECT: 149) LOG: client 0 'Bruce' MESSAGE 'See, you ruined the vibe'
EXPECT: 150) LOG: END: server_handle_client()
EXPECT: 151) LOG: BEGIN: server_check_sources()
EXPECT: 152) LOG: poll()'ing to check 3 input sources
EXPECT: 153) LOG: poll() completed with return value 1
EXPECT: 154) LOG: join_ready = 0
EXPECT: 155) LOG: client 0 'Bruce' data_ready = 0
EXPECT: 156) LOG: client 1 'Lois' data_ready = 1
EXPECT: 157) LOG: END: server_check_sources()
EXPECT: 158) LOG: BEGIN: server_handle_client()
EXPECT: 159) LOG: client 1 'Lois' MESSAGE 'You two are so touchy'
EXPECT: 160) LOG: END: server_handle_client()
EXPECT: 161) LOG: BEGIN: server_check_sources()
EXPECT: 162) LOG: poll()'ing to check 3 input sources
EXPECT: 163) LOG: poll() completed with return value 1
EXPECT: 164) LOG: join_ready = 1
EXPECT: 165) LOG: client 0 'Bruce' data_ready = 0
EXPECT: 166) LOG: client 1 'Lois' data_ready = 0
EXPECT: 167) LOG: END: server_check_sources()
EXPECT: 168) LOG: BEGIN: server_handle_join()
EXPECT: 169) LOG: join request for new client 'Clark'
EXPECT: 170) LOG: BEGIN: server_add_client()
EXPECT: 171) LOG: END: server_add_client()
EXPECT: 172) LOG: END: server_handle_join()
EXPECT: 173) LOG: BEGIN: server_check_sources()
EXPECT: 174) LOG: poll()'ing to check 4 input sources
EXPECT: 175) LOG: poll() completed with return value 1
EXPECT: 176) LOG: join_ready = 0
EXPECT: 177) LOG: client 0 'Bruce' data_ready = 0
EXPECT: 178) LOG: client 1 'Lois' data_ready = 0
EXPECT: 179) LOG: client 2 'Clark' data_ready = 1
EXPECT: 180) LOG: END: server_check_sources()
EXPECT: 181) LOG: BEGIN: server_handle_client()
EXPECT: 182) LOG: client 2 'Clark' MESSAGE 'Faster than a speeding bullet!'
EXPECT: 183) LOG: END: server_handle_client()
EXPECT: 184) LOG: BEGIN: server_check_sources()
EXPECT: 185) LOG: poll()'ing to check 4 input sources
EXPECT: 186) LOG: poll() completed with return value 1
EXPECT: 187) LOG: join_ready = 0
EXPECT: 188) LOG: client 0 'Bruce' data_ready = 1
EXPECT: 189) LOG: client 1 'Lois' data_ready = 0
EXPECT: 190) LOG: client 2 'Clark' data_ready = 0
EXPECT: 191) LOG: END: server_check_sources()
EXPECT: 192) LOG: BEGIN: server_handle_client()
EXPECT: 193) LOG: client 0 'Bruce' MESSAGE 'I am the night!'
EXPECT: 194) LOG: END: server_handle_client()
EXPECT: 195) LOG: BEGIN: server_check_sources()
EXPECT: 196) LOG: poll()'ing to check 4 input sources
EXPECT: 197) LOG: poll() completed with return value 1
EXPECT: 198) LOG: join_ready = 0
EXPECT: 199) LOG: client 0 'Bruce' data_ready = 0
EXPECT: 200) LOG: client 1 'Lois' data_ready = 1
EXPECT: 201) LOG: client 2 'Clark' data_ready = 0
EXPECT: 202) LOG: END: server_check_sources()
EXPECT: 203) LOG: BEGIN: server_handle_client()
EXPECT: 204) LOG: client 1 'Lois' MESSAGE 'Confidential sources state...'
EXPECT: 205) LOG: END: server_handle_client()
EXPECT: 206) LOG: BEGIN: server_check_sources()
EXPECT: 207) LOG: poll()'ing to check 4 input sources
EXPECT: 208) LOG: poll() completed with return value 1
EXPECT: 209) LOG: join_ready = 0
EXPECT: 210) LOG: client 0 'Bruce' data_ready = 0
EXPECT: 211) LOG: client 1 'Lois' data_ready = 0
EXPECT: 212) LOG: client 2 'Clark' data_ready = 1
EXPECT: 213) LOG: END: server_check_sources()
EXPECT: 214) LOG: BEGIN: server_handle_client()
EXPECT: 215) LOG: client 2 'Clark' DEPARTED
EXPECT: 216) LOG: END: server_handle_client()
EXPECT: 217) LOG: BEGIN: server_check_sources()
EXPECT: 218) LOG: poll()'ing to check 3 input sources
EXPECT: 219) LOG: poll() completed with return value 1
EXPECT: 220) LOG: join_ready = 0
EXPECT: 221) LOG: client 0 'Bruce' data_ready = 1
EXPECT: 222) LOG: client 1 'Lois' data_ready = 0
EXPECT: 223) LOG: END: server_check_sources()
EXPECT: 224) LOG: BEGIN: server_handle_client()
EXPECT: 225) LOG: client 0 'Bruce' DEPARTED
EXPECT: 226) LOG: END: server_handle_client()
EXPECT: 227) LOG: BEGIN: server_check_sources()
EXPECT: 228) LOG: poll()'ing to check 2 input sources
EXPECT: 229) LOG: poll() completed with return value 1
EXPECT: 230) LOG: join_ready = 0
EXPECT: 231) LOG: client 0 'Lois' data_ready = 1
EXPECT: 232) LOG: END: server_check_sources()
EXPECT: 233) LOG: BEGIN: server_handle_client()
EXPECT: 234) LOG: client 0 'Lois' MESSAGE 'Hey, I'm trying!'
EXPECT: 235) LOG: END: server_handle_client()
EXPECT: 236) LOG: BEGIN: server_check_sources()
EXPECT: 237) LOG: poll()'ing to check 2 input sources
EXPECT: 238) LOG: poll() completed with return value 1
EXPECT: 239) LOG: join_ready = 1
EXPECT: 240) LOG: client 0 'Lois' data_ready = 0
EXPECT: 241) LOG: END: server_check_sources()
EXPECT: 242) LOG: BEGIN: server_handle_join()
EXPECT: 243) LOG: join request for new client 'Clark'
EXPECT: 244) LOG: BEGIN: server_add_client()
EXPECT: 245) LOG: END: server_add_client()
EXPECT: 246) LOG: END: server_handle_join()
EXPECT: 247) LOG: BEGIN: server_check_sources()
EXPECT: 248) LOG: poll()'ing to check 3 input sources
EXPECT: 249) LOG: poll() completed with return value 1
EXPECT: 250) LOG: join_ready = 1
EXPECT: 251) LOG: client 0 'Lois' data_ready = 0
EXPECT: 252) LOG: client 1 'Clark' data_ready = 0
EXPECT: 253) LOG: END: server_check_sources()
EXPECT: 254) LOG: BEGIN: server_handle_join()
EXPECT: 255) LOG: join request for new client 'Bruce'
EXPECT: 256) LOG: BEGIN: server_add_client()
EXPECT: 257) LOG: END: server_add_client()
EXPECT: 258) LOG: END: server_handle_join()
EXPECT: 259) LOG: BEGIN: server_check_sources()
EXPECT: 260) LOG: poll()'ing to check 4 input sources
EXPECT: 261) LOG: poll() completed with return value 1
EXPECT: 262) LOG: join_ready = 0
EXPECT: 263) LOG: client 0 'Lois' data_ready = 1
EXPECT: 264) LOG: client 1 'Clark' data_ready = 0
EXPECT: 265) LOG: client 2 'Bruce' data_ready = 0
EXPECT: 266) LOG: END: server_check_sources()
EXPECT: 267) LOG: BEGIN: server_handle_client()
EXPECT: 268) LOG: client 0 'Lois' MESSAGE 'Give me one more shot'
EXPECT: 269) LOG: END: server_handle_client()
EXPECT: 270) LOG: BEGIN: server_check_sources()
EXPECT: 271) LOG: poll()'ing to check 4 input sources
EXPECT: 272) LOG: poll() completed with return value 1
EXPECT: 273) LOG: join_ready = 0
EXPECT: 274) LOG: client 0 'Lois' data_ready = 0
EXPECT: 275) LOG: client 1 'Clark' data_ready = 1
EXPECT: 276) LOG: client 2 'Bruce' data_ready = 0
EXPECT: 277) LOG: END: server_check_sources()
EXPECT: 278) LOG: BEGIN: server_handle_client()
EXPECT: 279) LOG: client 1 'Clark' MESSAGE 'Okay'
EXPECT: 280) LOG: END: server_handle_client()
EXPECT: 281) LOG: BEGIN: server_check_sources()
EXPECT: 282) LOG: poll()'ing to check 4 input sources
EXPECT: 283) LOG: poll() completed with return value 1
EXPECT: 284) LOG: join_ready = 0
EXPECT: 285) LOG: client 0 'Lois' data_ready = 0
EXPECT: 286) LOG: client 1 'Clark' data_ready = 0
EXPECT: 287) LOG: client 2 'Bruce' data_ready = 1
EXPECT: 288) LOG: END: server_check_sources()
EXPECT: 289) LOG: BEGIN: server_handle_client()
EXPECT: 290) LOG: client 2 'Bruce' MESSAGE 'I have my doubts'
EXPECT: 291) LOG: END: server_handle_client()
EXPECT: 292) LOG: BEGIN: server_check_sources()
EXPECT: 293) LOG: poll()'ing to check 4 input sources
EXPECT: 294) LOG: poll() completed with return value 1
EXPECT: 295) LOG: join_ready = 0
EXPECT: 296) LOG: client 0 'Lois' data_ready = 0
EXPECT: 297) LOG: client 1 'Clark' data_ready = 1
EXPECT: 298) LOG: client 2 'Bruce' data_ready = 0
EXPECT: 299) LOG: END: server_check_sources()
EXPECT: 300) LOG: BEGIN: server_handle_client()
EXPECT: 301) LOG: client 1 'Clark' MESSAGE 'More powerful than a locomotive'
EXPECT: 302) LOG: END: server_handle_client()
EXPECT: 303) LOG: BEGIN: server_check_sources()
EXPECT: 304) LOG: poll()'ing to check 4 input sources
EXPECT: 305) LOG: poll() completed with return value 1
EXPECT: 306) LOG: join_ready = 0
EXPECT: 307) LOG: client 0 'Lois' data_ready = 0
EXPECT: 308) LOG: client 1 'Clark' data_ready = 0
EXPECT: 309) LOG: client 2 'Bruce' data_ready = 1
EXPECT: 310) LOG: END: server_check_sources()
EXPECT: 311) LOG: BEGIN: server_handle_client()
EXPECT: 312) LOG: client 2 'Bruce' MESSAGE 'I am vengance!'
EXPECT: 313) LOG: END: server_handle_client()
EXPECT: 314) LOG: BEGIN: server_check_sources()
EXPECT: 315) LOG: poll()'ing to check 4 input sources
EXPECT: 316) LOG: poll() completed with return value 1
EXPECT: 317) LOG: join_ready = 0
EXPECT: 318) LOG: client 0 'Lois' data_ready = 1
EXPECT: 319) LOG: client 1 'Clark' data_ready = 0
EXPECT: 320) LOG: client 2 'Bruce' data_ready = 0
EXPECT: 321) LOG: END: server_check_sources()
EXPECT: 322) LOG: BEGIN: server_handle_client()
EXPECT: 323) LOG: client 0 'Lois' MESSAGE 'Fair and balanced!'
EXPECT: 324) LOG: END: server_handle_client()
EXPECT: 325) LOG: BEGIN: server_check_sources()
EXPECT: 326) LOG: poll()'ing to check 4 input sources
EXPECT: 327) LOG: poll() completed with return value 1
EXPECT: 328) LOG: join_ready = 0
EXPECT: 329) LOG: client 0 'Lois' data_ready = 0
EXPECT: 330) LOG: client 1 'Clark' data_ready = 0
EXPECT: 331) LOG: client 2 'Bruce' data_ready = 1
EXPECT: 332) LOG: END: server_check_sources()
EXPECT: 333) LOG: BEGIN: server_handle_client()
EXPECT: 334) LOG: client 2 'Bruce' MESSAGE 'Strike 3.'
EXPECT: 335) LOG: END: server_handle_client()
EXPECT: 336) LOG: BEGIN: server_check_sources()
EXPECT: 337) LOG: poll()'ing to check 4 input sources
EXPECT: 338) LOG: poll() completed with return value 1
EXPECT: 339) LOG: join_ready = 0
EXPECT: 340) LOG: client 0 'Lois' data_ready = 0
EXPECT: 341) LOG: client 1 'Clark' data_ready = 1
EXPECT: 342) LOG: client 2 'Bruce' data_ready = 0
EXPECT: 343) LOG: END: server_check_sources()
EXPECT: 344) LOG: BEGIN: server_handle_client()
EXPECT: 345) LOG: client 1 'Clark' MESSAGE 'Seriously?'
EXPECT: 346) LOG: END: server_handle_client()
EXPECT: 347) LOG: BEGIN: server_check_sources()
EXPECT: 348) LOG: poll()'ing to check 4 input sources
EXPECT: 349) LOG: poll() completed with return value 1
EXPECT: 350) LOG: join_ready = 0
EXPECT: 351) LOG: client 0 'Lois' data_ready = 1
EXPECT: 352) LOG: client 1 'Clark' data_ready = 0
EXPECT: 353) LOG: client 2 'Bruce' data_ready = 0
EXPECT: 354) LOG: END: server_check_sources()
EXPECT: 355) LOG: BEGIN: server_handle_client()
EXPECT: 356) LOG: client 0 'Lois' MESSAGE 'You guys are jerks.'
EXPECT: 357) LOG: END: server_handle_client()
EXPECT: 358) LOG: BEGIN: server_check_sources()
EXPECT: 359) LOG: poll()'ing to check 4 input sources
EXPECT: 360) LOG: poll() completed with return value 1
EXPECT: 361) LOG: join_ready = 0
EXPECT: 362) LOG: client 0 'Lois' data_ready = 1
EXPECT: 363) LOG: client 1 'Clark' data_ready = 0
EXPECT: 364) LOG: client 2 'Bruce' data_ready = 0
EXPECT: 365) LOG: END: server_check_sources()
EXPECT: 366) LOG: BEGIN: server_handle_client()
EXPECT: 367) LOG: client 0 'Lois' DEPARTED
EXPECT: 368) LOG: END: server_handle_client()
EXPECT: 369) LOG: BEGIN: server_check_sources()
EXPECT: 370) LOG: poll()'ing to check 3 input sources
EXPECT: 371) LOG: poll() completed with return value 1
EXPECT: 372) LOG: join_ready = 0
EXPECT: 373) LOG: client 0 'Clark' data_ready = 1
EXPECT: 374) LOG: client 1 'Bruce' data_ready = 0
EXPECT: 375) LOG: END: server_check_sources()
EXPECT: 376) LOG: BEGIN: server_handle_client()
EXPECT: 377) LOG: client 0 'Clark' MESSAGE 'Think we were too hard on her?'
EXPECT: 378) LOG: END: server_handle_client()
EXPECT: 379) LOG: BEGIN: server_check_sources()
EXPECT: 380) LOG: poll()'ing to check 3 input sources
EXPECT: 381) LOG: poll() completed with return value 1
EXPECT: 382) LOG: join_ready = 0
EXPECT: 383) LOG: client 0 'Clark' data_ready = 0
EXPECT: 384) LOG: client 1 'Bruce' data_ready = 1
EXPECT: 385) LOG: END: server_check_sources()
EXPECT: 386) LOG: BEGIN: server_handle_client()
EXPECT: 387) LOG: client 1 'Bruce' MESSAGE 'I am Batman!'
EXPECT: 388) LOG: END: server_handle_client()
EXPECT: 389) LOG: BEGIN: server_check_sources()
EXPECT: 390) LOG: poll()'ing to check 3 input sources
EXPECT: 391) LOG: poll() completed with return value 1
EXPECT: 392) LOG: join_ready = 0
EXPECT: 393) LOG: client 0 'Clark' data_ready = 1
EXPECT: 394) LOG: client 1 'Bruce' data_ready = 0
EXPECT: 395) LOG: END: server_check_sources()
EXPECT: 396) LOG: BEGIN: server_handle_client()
EXPECT: 397) LOG: client 0 'Clark' MESSAGE 'Okay. We're done here.'
EXPECT: 398) LOG: END: server_handle_client()
EXPECT: 399) LOG: BEGIN: server_check_sources()
EXPECT: 400) LOG: poll()'ing to check 3 input sources
EXPECT: 401) LOG: poll() completed with return value -1
EXPECT: 402) LOG: poll() interrupted by a signal
EXPECT: 403) LOG: END: server_check_sources()
EXPECT: 404) LOG: BEGIN: server_shutdown()
EXPECT: 405) LOG: END: server_shutdown()
ACTUAL:  65) Couldn't open file metropolÿ.log: Invalid argument
EXPECT: 408) -- Clark JOINED --
EXPECT: 409) [Clark] : Superman 
EXPECT: 410) -- Bruce JOINED --
EXPECT: 411) [Bruce] : Batman
EXPECT: 412) -- Lois JOINED --
EXPECT: 413) [Lois] : Investigative journalism!
EXPECT: 414) [Bruce] : Er...
EXPECT: 415) End of Input, Departing
EXPECT: 416) Clark>> 
EXPECT: 419) -- Bruce JOINED --
EXPECT: 420) [Bruce] : Batman
EXPECT: 421) -- Lois JOINED --
EXPECT: 422) [Lois] : Investigative journalism!
EXPECT: 423) [Bruce] : Er...
EXPECT: 424) -- Clark DEPARTED --
EXPECT: 425) [Bruce] : See, you ruined the vibe
EXPECT: 426) [Lois] : You two are so touchy
EXPECT: 427) -- Clark JOINED --
EXPECT: 428) [Clark] : Faster than a speeding bullet!
EXPECT: 429) [Bruce] : I am the night!
EXPECT: 430) [Lois] : Confidential sources state...
EXPECT: 431) -- Clark DEPARTED --
EXPECT: 432) End of Input, Departing
EXPECT: 433) Bruce>> 
EXPECT: 436) -- Lois JOINED --
EXPECT: 437) [Lois] : Investigative journalism!
EXPECT: 438) [Bruce] : Er...
EXPECT: 439) -- Clark DEPARTED --
EXPECT: 440) [Bruce] : See, you ruined the vibe
EXPECT: 441) [Lois] : You two are so touchy
EXPECT: 442) -- Clark JOINED --
EXPECT: 443) [Clark] : Faster than a speeding bullet!
EXPECT: 444) [Bruce] : I am the night!
EXPECT: 445) [Lois] : Confidential sources state...
EXPECT: 446) -- Clark DEPARTED --
EXPECT: 447) -- Bruce DEPARTED --
EXPECT: 448) [Lois] : Hey, I'm trying!
EXPECT: 449) -- Clark JOINED --
EXPECT: 450) -- Bruce JOINED --
EXPECT: 451) [Lois] : Give me one more shot
EXPECT: 452) [Clark] : Okay
EXPECT: 453) [Bruce] : I have my doubts
EXPECT: 454) [Clark] : More powerful than a locomotive
EXPECT: 455) [Bruce] : I am vengance!
EXPECT: 456) [Lois] : Fair and balanced!
EXPECT: 457) [Bruce] : Strike 3.
EXPECT: 458) [Clark] : Seriously?
EXPECT: 459) [Lois] : You guys are jerks.
EXPECT: 460) End of Input, Departing
EXPECT: 461) Lois>> 
EXPECT: 464) -- Clark JOINED --
EXPECT: 465) [Clark] : Faster than a speeding bullet!
EXPECT: 466) [Bruce] : I am the night!
EXPECT: 467) [Lois] : Confidential sources state...
EXPECT: 468) End of Input, Departing
EXPECT: 469) Clark>> 
EXPECT: 472) -- Clark JOINED --
EXPECT: 473) -- Bruce JOINED --
EXPECT: 474) [Lois] : Give me one more shot
EXPECT: 475) [Clark] : Okay
EXPECT: 476) [Bruce] : I have my doubts
EXPECT: 477) [Clark] : More powerful than a locomotive
EXPECT: 478) [Bruce] : I am vengance!
EXPECT: 479) [Lois] : Fair and balanced!
EXPECT: 480) [Bruce] : Strike 3.
EXPECT: 481) [Clark] : Seriously?
EXPECT: 482) [Lois] : You guys are jerks.
EXPECT: 483) -- Lois DEPARTED --
EXPECT: 484) [Clark] : Think we were too hard on her?
EXPECT: 485) [Bruce] : I am Batman!
EXPECT: 486) [Clark] : Okay. We're done here.
EXPECT: 487) !!! server is shutting down !!!
EXPECT: 488) Clark>> 
EXPECT: 491) -- Bruce JOINED --
EXPECT: 492) [Lois] : Give me one more shot
EXPECT: 493) [Clark] : Okay
EXPECT: 494) [Bruce] : I have my doubts
EXPECT: 495) [Clark] : More powerful than a locomotive
EXPECT: 496) [Bruce] : I am vengance!
EXPECT: 497) [Lois] : Fair and balanced!
EXPECT: 498) [Bruce] : Strike 3.
EXPECT: 499) [Clark] : Seriously?
EXPECT: 500) [Lois] : You guys are jerks.
EXPECT: 501) -- Lois DEPARTED --
EXPECT: 502) [Clark] : Think we were too hard on her?
EXPECT: 503) [Bruce] : I am Batman!
EXPECT: 504) [Clark] : Okay. We're done here.
EXPECT: 505) !!! server is shutting down !!!
EXPECT: 506) Bruce>> 
ACTUAL:  78) 
ACTUAL:  79) 
ACTUAL:  80) 
ACTUAL:  81) 
ACTUAL:  82) 
ACTUAL:  83) 
ACTUAL:  84) 


